{"ast":null,"code":"var _jsxFileName = \"/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BubbleChart({\n  onBubbleClick,\n  nutrient,\n  data\n}) {\n  _s();\n  const ref = useRef();\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n\n    // Compute average nutrient per category\n    const categoryMap = {};\n    data.forEach(drink => {\n      const cat = drink.category;\n      if (!categoryMap[cat]) categoryMap[cat] = {\n        total: 0,\n        count: 0\n      };\n      categoryMap[cat].total += drink[nutrient] || 0;\n      categoryMap[cat].count += 1;\n    });\n    const categories = Object.entries(categoryMap).map(([type, val]) => ({\n      type,\n      avg: val.total / val.count\n    }));\n    const svg = d3.select(ref.current);\n    svg.selectAll('*').remove();\n    const width = svg.node().getBoundingClientRect().width;\n    const height = svg.node().getBoundingClientRect().height;\n    const scale = d3.scaleSqrt().domain([0, d3.max(categories, d => d.avg)]).range([20, 60]);\n    const simulation = d3.forceSimulation(categories).force('x', d3.forceX(width / 2).strength(0.05)).force('y', d3.forceY(height / 2).strength(0.05)).force('collide', d3.forceCollide(d => scale(d.avg) + 6)).stop();\n    for (let i = 0; i < 100; ++i) simulation.tick();\n    const g = svg.selectAll('g').data(categories).enter().append('g').attr('transform', d => `translate(${d.x},${d.y})`).style('cursor', 'pointer').on('click', (_, d) => onBubbleClick(d.type));\n    g.append('circle').attr('r', d => scale(d.avg)).attr('fill', 'orange').attr('opacity', 0.85);\n    g.append('text').attr('text-anchor', 'middle').attr('dy', '.35em').style('font-size', '13px').style('fill', '#333').text(d => d.type.split(' ')[0]); // Shorten if needed\n  }, [nutrient, data, onBubbleClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Average \", formatLabel(nutrient), \" by Type\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref,\n      style: {\n        width: '100%',\n        height: '270px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n_s(BubbleChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = BubbleChart;\nexport default BubbleChart;\nvar _c;\n$RefreshReg$(_c, \"BubbleChart\");","map":{"version":3,"names":["useEffect","useRef","d3","formatLabel","jsxDEV","_jsxDEV","BubbleChart","onBubbleClick","nutrient","data","_s","ref","length","categoryMap","forEach","drink","cat","category","total","count","categories","Object","entries","map","type","val","avg","svg","select","current","selectAll","remove","width","node","getBoundingClientRect","height","scale","scaleSqrt","domain","max","d","range","simulation","forceSimulation","force","forceX","strength","forceY","forceCollide","stop","i","tick","g","enter","append","attr","x","y","style","on","_","text","split","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\n\nfunction BubbleChart({ onBubbleClick, nutrient, data }) {\n    const ref = useRef();\n\n    useEffect(() => {\n        if (!data || data.length === 0) return;\n\n        // Compute average nutrient per category\n        const categoryMap = {};\n        data.forEach(drink => {\n            const cat = drink.category;\n            if (!categoryMap[cat]) categoryMap[cat] = { total: 0, count: 0 };\n            categoryMap[cat].total += drink[nutrient] || 0;\n            categoryMap[cat].count += 1;\n        });\n\n        const categories = Object.entries(categoryMap).map(([type, val]) => ({\n            type,\n            avg: val.total / val.count\n        }));\n\n        const svg = d3.select(ref.current);\n        svg.selectAll('*').remove();\n\n        const width = svg.node().getBoundingClientRect().width;\n        const height = svg.node().getBoundingClientRect().height;\n\n        const scale = d3.scaleSqrt()\n            .domain([0, d3.max(categories, d => d.avg)])\n            .range([20, 60]);\n\n        const simulation = d3.forceSimulation(categories)\n            .force('x', d3.forceX(width / 2).strength(0.05))\n            .force('y', d3.forceY(height / 2).strength(0.05))\n            .force('collide', d3.forceCollide(d => scale(d.avg) + 6))\n            .stop();\n\n        for (let i = 0; i < 100; ++i) simulation.tick();\n\n        const g = svg.selectAll('g')\n            .data(categories)\n            .enter()\n            .append('g')\n            .attr('transform', d => `translate(${d.x},${d.y})`)\n            .style('cursor', 'pointer')\n            .on('click', (_, d) => onBubbleClick(d.type));\n\n        g.append('circle')\n            .attr('r', d => scale(d.avg))\n            .attr('fill', 'orange')\n            .attr('opacity', 0.85);\n\n        g.append('text')\n            .attr('text-anchor', 'middle')\n            .attr('dy', '.35em')\n            .style('font-size', '13px')\n            .style('fill', '#333')\n            .text(d => d.type.split(' ')[0]); // Shorten if needed\n\n    }, [nutrient, data, onBubbleClick]);\n\n    return (\n        <div>\n            <h3>Average {formatLabel(nutrient)} by Type</h3>\n            <svg ref={ref} style={{ width: '100%', height: '270px' }}></svg>\n        </div>\n    );\n}\n\nexport default BubbleChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}