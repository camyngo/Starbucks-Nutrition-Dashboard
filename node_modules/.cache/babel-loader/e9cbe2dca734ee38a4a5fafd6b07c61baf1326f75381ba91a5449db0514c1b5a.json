{"ast":null,"code":"var _jsxFileName = \"/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport './BubbleChart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BubbleChart({\n  data,\n  nutrient\n}) {\n  _s();\n  const ref = useRef();\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n    const grouped = d3.groups(data, d => d.category);\n    const categoryAverages = grouped.map(([category, items]) => {\n      const valid = items.filter(d => d[nutrient] !== undefined && !isNaN(d[nutrient]));\n      const avg = d3.mean(valid, d => +d[nutrient]);\n      return {\n        category,\n        avg\n      };\n    }).filter(d => !isNaN(d.avg));\n    const svg = d3.select(ref.current);\n    svg.selectAll('*').remove();\n    const container = svg.node().parentElement;\n    const width = container.clientWidth;\n    const height = 300;\n    const scale = d3.scaleSqrt().domain([0, d3.max(categoryAverages, d => d.avg)]).range([20, 60]);\n    const simulation = d3.forceSimulation(categoryAverages).force('x', d3.forceX(width / 2).strength(0.05)).force('y', d3.forceY(height / 2 + 20).strength(0.1)).force('collide', d3.forceCollide(d => scale(d.avg) + 4)).stop();\n    for (let i = 0; i < 100; ++i) simulation.tick();\n    const g = svg.selectAll('g').data(categoryAverages).enter().append('g').attr('transform', d => `translate(${d.x},${d.y})`);\n    g.append('circle').attr('r', d => scale(d.avg)).attr('fill', '#00704A').attr('stroke', '#e76f51').attr('stroke-width', 1).attr('opacity', 0.85);\n    g.append('text').text(d => {\n      const parts = d.category.split(' ');\n      return parts.length > 2 ? parts.slice(0, 2).join(' ') + '...' : d.category;\n    }).attr('dy', '.35em').style('font-weight', `600`).style('fill', 'white');\n  }, [data, nutrient]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bubble-chart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Average \", formatLabel(nutrient), \" by Type of Drinks\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n_s(BubbleChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = BubbleChart;\nexport default BubbleChart;\nvar _c;\n$RefreshReg$(_c, \"BubbleChart\");","map":{"version":3,"names":["useEffect","useRef","d3","formatLabel","jsxDEV","_jsxDEV","BubbleChart","data","nutrient","_s","ref","length","grouped","groups","d","category","categoryAverages","map","items","valid","filter","undefined","isNaN","avg","mean","svg","select","current","selectAll","remove","container","node","parentElement","width","clientWidth","height","scale","scaleSqrt","domain","max","range","simulation","forceSimulation","force","forceX","strength","forceY","forceCollide","stop","i","tick","g","enter","append","attr","x","y","text","parts","split","slice","join","style","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport './BubbleChart.css';\n\nfunction BubbleChart({ data, nutrient }) {\n    const ref = useRef();\n\n    useEffect(() => {\n        if (!data || data.length === 0) return;\n\n        const grouped = d3.groups(data, d => d.category);\n        const categoryAverages = grouped.map(([category, items]) => {\n            const valid = items.filter(d => d[nutrient] !== undefined && !isNaN(d[nutrient]));\n            const avg = d3.mean(valid, d => +d[nutrient]);\n            return { category, avg };\n        }).filter(d => !isNaN(d.avg));\n\n        const svg = d3.select(ref.current);\n        svg.selectAll('*').remove();\n\n        const container = svg.node().parentElement;\n        const width = container.clientWidth;\n        const height = 300;\n\n        const scale = d3.scaleSqrt()\n            .domain([0, d3.max(categoryAverages, d => d.avg)])\n            .range([20, 60]);\n\n        const simulation = d3.forceSimulation(categoryAverages)\n            .force('x', d3.forceX(width / 2).strength(0.05))\n            .force('y', d3.forceY(height / 2 + 20).strength(0.1))\n            .force('collide', d3.forceCollide(d => scale(d.avg) + 4))\n            .stop();\n\n        for (let i = 0; i < 100; ++i) simulation.tick();\n\n        const g = svg.selectAll('g')\n            .data(categoryAverages)\n            .enter()\n            .append('g')\n            .attr('transform', d => `translate(${d.x},${d.y})`);\n\n        g.append('circle')\n            .attr('r', d => scale(d.avg))\n            .attr('fill', '#00704A')\n            .attr('stroke', '#e76f51')\n            .attr('stroke-width', 1)\n            .attr('opacity', 0.85);\n\n        g.append('text')\n            .text(d => {\n                const parts = d.category.split(' ');\n                return parts.length > 2 ? parts.slice(0, 2).join(' ') + '...' : d.category;\n            })\n            .attr('dy', '.35em')\n            .style('font-weight', `600`)\n            .style('fill', 'white');\n\n    }, [data, nutrient]);\n\n    return (\n        <div className=\"bubble-chart-container\">\n            <h3>Average {formatLabel(nutrient)} by Type of Drinks</h3>\n            <svg ref={ref}></svg>\n        </div>\n    );\n}\n\nexport default BubbleChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}