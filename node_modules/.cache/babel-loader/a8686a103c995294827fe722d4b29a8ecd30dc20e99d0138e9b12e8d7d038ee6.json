{"ast":null,"code":"var _jsxFileName = \"/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BubbleChart({\n  nutrient\n}) {\n  _s();\n  const ref = useRef();\n  useEffect(() => {\n    const width = 400;\n    const height = 300;\n    const svg = d3.select(ref.current);\n    svg.selectAll('*').remove();\n    import('../../data/StarbucksDrinks.json').then(module => {\n      const drinks = module.default;\n\n      // Group by type, filter entries with no type or missing nutrient\n      const grouped = d3.group(drinks.filter(d => d.type && typeof d[nutrient] === 'number'), d => d.type);\n      const data = Array.from(grouped, ([type, items]) => ({\n        type,\n        avg: d3.mean(items, d => d[nutrient])\n      }));\n      const scale = d3.scaleSqrt().domain([0, d3.max(data, d => d.avg)]).range([20, 45]);\n      const simulation = d3.forceSimulation(data).force('x', d3.forceX(width / 2).strength(0.05)).force('y', d3.forceY(height / 2).strength(0.05)).force('collide', d3.forceCollide(d => scale(d.avg) + 4)).stop();\n      for (let i = 0; i < 120; ++i) simulation.tick();\n      const g = svg.selectAll('g').data(data).enter().append('g').attr('transform', d => `translate(${d.x},${d.y})`);\n      g.append('circle').attr('r', d => scale(d.avg)).attr('fill', 'orange').attr('opacity', 0.8);\n      g.append('text').attr('text-anchor', 'middle').attr('dy', '.35em').style('font-size', '12px').style('fill', '#333').text(d => d.type.length > 12 ? d.type.slice(0, 10) + '…' : d.type);\n    });\n  }, [nutrient]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '12px'\n      },\n      children: [\"Average \", formatLabel(nutrient), \" by Type of Drinks\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref,\n      width: \"100%\",\n      height: \"300px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(BubbleChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = BubbleChart;\nexport default BubbleChart;\nvar _c;\n$RefreshReg$(_c, \"BubbleChart\");","map":{"version":3,"names":["useEffect","useRef","d3","formatLabel","jsxDEV","_jsxDEV","BubbleChart","nutrient","_s","ref","width","height","svg","select","current","selectAll","remove","then","module","drinks","default","grouped","group","filter","d","type","data","Array","from","items","avg","mean","scale","scaleSqrt","domain","max","range","simulation","forceSimulation","force","forceX","strength","forceY","forceCollide","stop","i","tick","g","enter","append","attr","x","y","style","text","length","slice","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\n\nfunction BubbleChart({ nutrient }) {\n    const ref = useRef();\n\n    useEffect(() => {\n        const width = 400;\n        const height = 300;\n\n        const svg = d3.select(ref.current);\n        svg.selectAll('*').remove();\n\n        import('../../data/StarbucksDrinks.json').then((module) => {\n            const drinks = module.default;\n\n            // Group by type, filter entries with no type or missing nutrient\n            const grouped = d3.group(\n                drinks.filter(d => d.type && typeof d[nutrient] === 'number'),\n                d => d.type\n            );\n\n            const data = Array.from(grouped, ([type, items]) => ({\n                type,\n                avg: d3.mean(items, d => d[nutrient])\n            }));\n\n            const scale = d3.scaleSqrt()\n                .domain([0, d3.max(data, d => d.avg)])\n                .range([20, 45]);\n\n            const simulation = d3.forceSimulation(data)\n                .force('x', d3.forceX(width / 2).strength(0.05))\n                .force('y', d3.forceY(height / 2).strength(0.05))\n                .force('collide', d3.forceCollide(d => scale(d.avg) + 4))\n                .stop();\n\n            for (let i = 0; i < 120; ++i) simulation.tick();\n\n            const g = svg.selectAll('g')\n                .data(data)\n                .enter()\n                .append('g')\n                .attr('transform', d => `translate(${d.x},${d.y})`);\n\n            g.append('circle')\n                .attr('r', d => scale(d.avg))\n                .attr('fill', 'orange')\n                .attr('opacity', 0.8);\n\n            g.append('text')\n                .attr('text-anchor', 'middle')\n                .attr('dy', '.35em')\n                .style('font-size', '12px')\n                .style('fill', '#333')\n                .text(d => d.type.length > 12 ? d.type.slice(0, 10) + '…' : d.type);\n        });\n    }, [nutrient]);\n\n    return (\n        <div>\n            <h3 style={{ textAlign: 'center', marginBottom: '12px' }}>\n                Average {formatLabel(nutrient)} by Type of Drinks\n            </h3>\n            <svg ref={ref} width=\"100%\" height=\"300px\"></svg>\n        </div>\n    );\n}\n\nexport default BubbleChart;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,OAAO,KAAKC,EAAE,MAAM,IAAI;AACxB,SAASC,WAAW,QAAQ,gCAAgC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7D,SAASC,WAAWA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC/B,MAAMC,GAAG,GAAGR,MAAM,CAAC,CAAC;EAEpBD,SAAS,CAAC,MAAM;IACZ,MAAMU,KAAK,GAAG,GAAG;IACjB,MAAMC,MAAM,GAAG,GAAG;IAElB,MAAMC,GAAG,GAAGV,EAAE,CAACW,MAAM,CAACJ,GAAG,CAACK,OAAO,CAAC;IAClCF,GAAG,CAACG,SAAS,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;IAE3B,MAAM,CAAC,iCAAiC,CAAC,CAACC,IAAI,CAAEC,MAAM,IAAK;MACvD,MAAMC,MAAM,GAAGD,MAAM,CAACE,OAAO;;MAE7B;MACA,MAAMC,OAAO,GAAGnB,EAAE,CAACoB,KAAK,CACpBH,MAAM,CAACI,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,IAAI,OAAOD,CAAC,CAACjB,QAAQ,CAAC,KAAK,QAAQ,CAAC,EAC7DiB,CAAC,IAAIA,CAAC,CAACC,IACX,CAAC;MAED,MAAMC,IAAI,GAAGC,KAAK,CAACC,IAAI,CAACP,OAAO,EAAE,CAAC,CAACI,IAAI,EAAEI,KAAK,CAAC,MAAM;QACjDJ,IAAI;QACJK,GAAG,EAAE5B,EAAE,CAAC6B,IAAI,CAACF,KAAK,EAAEL,CAAC,IAAIA,CAAC,CAACjB,QAAQ,CAAC;MACxC,CAAC,CAAC,CAAC;MAEH,MAAMyB,KAAK,GAAG9B,EAAE,CAAC+B,SAAS,CAAC,CAAC,CACvBC,MAAM,CAAC,CAAC,CAAC,EAAEhC,EAAE,CAACiC,GAAG,CAACT,IAAI,EAAEF,CAAC,IAAIA,CAAC,CAACM,GAAG,CAAC,CAAC,CAAC,CACrCM,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MAEpB,MAAMC,UAAU,GAAGnC,EAAE,CAACoC,eAAe,CAACZ,IAAI,CAAC,CACtCa,KAAK,CAAC,GAAG,EAAErC,EAAE,CAACsC,MAAM,CAAC9B,KAAK,GAAG,CAAC,CAAC,CAAC+B,QAAQ,CAAC,IAAI,CAAC,CAAC,CAC/CF,KAAK,CAAC,GAAG,EAAErC,EAAE,CAACwC,MAAM,CAAC/B,MAAM,GAAG,CAAC,CAAC,CAAC8B,QAAQ,CAAC,IAAI,CAAC,CAAC,CAChDF,KAAK,CAAC,SAAS,EAAErC,EAAE,CAACyC,YAAY,CAACnB,CAAC,IAAIQ,KAAK,CAACR,CAAC,CAACM,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CACxDc,IAAI,CAAC,CAAC;MAEX,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,GAAG,EAAE,EAAEA,CAAC,EAAER,UAAU,CAACS,IAAI,CAAC,CAAC;MAE/C,MAAMC,CAAC,GAAGnC,GAAG,CAACG,SAAS,CAAC,GAAG,CAAC,CACvBW,IAAI,CAACA,IAAI,CAAC,CACVsB,KAAK,CAAC,CAAC,CACPC,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC,WAAW,EAAE1B,CAAC,IAAI,aAAaA,CAAC,CAAC2B,CAAC,IAAI3B,CAAC,CAAC4B,CAAC,GAAG,CAAC;MAEvDL,CAAC,CAACE,MAAM,CAAC,QAAQ,CAAC,CACbC,IAAI,CAAC,GAAG,EAAE1B,CAAC,IAAIQ,KAAK,CAACR,CAAC,CAACM,GAAG,CAAC,CAAC,CAC5BoB,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CACtBA,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC;MAEzBH,CAAC,CAACE,MAAM,CAAC,MAAM,CAAC,CACXC,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CACnBG,KAAK,CAAC,WAAW,EAAE,MAAM,CAAC,CAC1BA,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CACrBC,IAAI,CAAC9B,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC8B,MAAM,GAAG,EAAE,GAAG/B,CAAC,CAACC,IAAI,CAAC+B,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,GAAGhC,CAAC,CAACC,IAAI,CAAC;IAC3E,CAAC,CAAC;EACN,CAAC,EAAE,CAAClB,QAAQ,CAAC,CAAC;EAEd,oBACIF,OAAA;IAAAoD,QAAA,gBACIpD,OAAA;MAAIgD,KAAK,EAAE;QAAEK,SAAS,EAAE,QAAQ;QAAEC,YAAY,EAAE;MAAO,CAAE;MAAAF,QAAA,GAAC,UAC9C,EAACtD,WAAW,CAACI,QAAQ,CAAC,EAAC,oBACnC;IAAA;MAAAqD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACL1D,OAAA;MAAKI,GAAG,EAAEA,GAAI;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC;IAAO;MAAAiD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChD,CAAC;AAEd;AAACvD,EAAA,CAhEQF,WAAW;AAAA0D,EAAA,GAAX1D,WAAW;AAkEpB,eAAeA,WAAW;AAAC,IAAA0D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}