{"ast":null,"code":"var _jsxFileName = \"/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport './BubbleChart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BubbleChart({\n  data,\n  nutrient,\n  category\n}) {\n  _s();\n  const ref = useRef();\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n    let bubblesData;\n    if (category === 'drinks') {\n      const grouped = d3.groups(data, d => d.category);\n      bubblesData = grouped.map(([cat, items]) => {\n        const valid = items.filter(d => d[nutrient] !== undefined && !isNaN(d[nutrient]));\n        return {\n          label: cat,\n          value: d3.mean(valid, d => +d[nutrient])\n        };\n      }).filter(d => !isNaN(d.value));\n    } else {\n      const sortedFoods = [...data].filter(d => d[nutrient] !== undefined && !isNaN(d[nutrient])).sort((a, b) => b[nutrient] - a[nutrient]).slice(0, 10);\n      bubblesData = sortedFoods.map(d => ({\n        label: d.name,\n        value: +d[nutrient]\n      }));\n    }\n    const svg = d3.select(ref.current);\n    svg.selectAll('*').remove();\n    const container = svg.node().parentElement;\n    const width = container.clientWidth;\n    const fullHeight = container.clientHeight;\n    const headerHeight = 40;\n    const height = fullHeight - headerHeight;\n    const maxValue = d3.max(bubblesData, d => d.value);\n    const scale = d3.scaleSqrt().domain([0, maxValue]).range([30, 70]);\n    const simulation = d3.forceSimulation(bubblesData).force('x', d3.forceX(width / 2).strength(0.05)).force('y', d3.forceY(height / 2 + headerHeight + 20).strength(0.1)).force('collide', d3.forceCollide(d => scale(d.value) + 4)).stop();\n    for (let i = 0; i < 100; i++) simulation.tick();\n    svg.attr('viewBox', `0 0 ${width} ${fullHeight}`).attr('preserveAspectRatio', 'xMidYMid meet');\n    const g = svg.selectAll('g').data(bubblesData).enter().append('g').attr('transform', d => `translate(${d.x},${d.y})`);\n    g.append('circle').attr('r', d => scale(d.value)).attr('fill', '#00704A').attr('stroke', '#e76f51').attr('stroke-width', 1).attr('opacity', 0.85);\n    g.append('text').style('text-anchor', 'middle').style('font-size', d => `${Math.min(scale(d.value) / 3, 12)}px`).style('fill', 'white').style('pointer-events', 'none').selectAll('tspan').data(d => {\n      const words = d.label.split(' ');\n      const lines = [];\n      for (let i = 0; i < words.length; i += 2) {\n        lines.push(words.slice(i, i + 2).join(' '));\n      }\n      return lines;\n    }).enter().append('tspan').attr('x', 0).attr('dy', function (_, i, nodes) {\n      const totalLines = nodes.length;\n      const lineHeight = 1.2;\n      const firstDy = -((totalLines - 1) / 2) * lineHeight;\n      return i === 0 ? `${firstDy}em` : `${lineHeight}em`;\n    }).text(d => d);\n  }, [data, nutrient, category]);\n  const headerText = category === 'drinks' ? `Average ${formatLabel(nutrient)} by Type of Drinks` : `Top 10 Food Items by ${formatLabel(nutrient)}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bubble-chart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: headerText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n_s(BubbleChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = BubbleChart;\nexport default BubbleChart;\nvar _c;\n$RefreshReg$(_c, \"BubbleChart\");","map":{"version":3,"names":["React","useEffect","useRef","d3","formatLabel","jsxDEV","_jsxDEV","BubbleChart","data","nutrient","category","_s","ref","length","bubblesData","grouped","groups","d","map","cat","items","valid","filter","undefined","isNaN","label","value","mean","sortedFoods","sort","a","b","slice","name","svg","select","current","selectAll","remove","container","node","parentElement","width","clientWidth","fullHeight","clientHeight","headerHeight","height","maxValue","max","scale","scaleSqrt","domain","range","simulation","forceSimulation","force","forceX","strength","forceY","forceCollide","stop","i","tick","attr","g","enter","append","x","y","style","Math","min","words","split","lines","push","join","_","nodes","totalLines","lineHeight","firstDy","text","headerText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport './BubbleChart.css';\n\nfunction BubbleChart({ data, nutrient, category }) {\n    const ref = useRef();\n\n    useEffect(() => {\n        if (!data || data.length === 0) return;\n\n        let bubblesData;\n        if (category === 'drinks') {\n            const grouped = d3.groups(data, d => d.category);\n            bubblesData = grouped\n                .map(([cat, items]) => {\n                    const valid = items.filter(\n                        d => d[nutrient] !== undefined && !isNaN(d[nutrient])\n                    );\n                    return { label: cat, value: d3.mean(valid, d => +d[nutrient]) };\n                })\n                .filter(d => !isNaN(d.value));\n        } else {\n            const sortedFoods = [...data]\n                .filter(d => d[nutrient] !== undefined && !isNaN(d[nutrient]))\n                .sort((a, b) => b[nutrient] - a[nutrient])\n                .slice(0, 10);\n            bubblesData = sortedFoods.map(d => ({\n                label: d.name,\n                value: +d[nutrient],\n            }));\n        }\n\n        const svg = d3.select(ref.current);\n        svg.selectAll('*').remove();\n\n        const container = svg.node().parentElement;\n        const width = container.clientWidth;\n        const fullHeight = container.clientHeight;\n        const headerHeight = 40;\n        const height = fullHeight - headerHeight;\n\n        const maxValue = d3.max(bubblesData, d => d.value);\n        const scale = d3.scaleSqrt().domain([0, maxValue]).range([30, 70]);\n\n        const simulation = d3.forceSimulation(bubblesData)\n            .force('x', d3.forceX(width / 2).strength(0.05))\n            .force('y', d3.forceY((height / 2) + headerHeight + 20).strength(0.1))\n            .force('collide', d3.forceCollide(d => scale(d.value) + 4))\n            .stop();\n\n        for (let i = 0; i < 100; i++) simulation.tick();\n\n        svg\n            .attr('viewBox', `0 0 ${width} ${fullHeight}`)\n            .attr('preserveAspectRatio', 'xMidYMid meet');\n\n        const g = svg.selectAll('g')\n            .data(bubblesData)\n            .enter()\n            .append('g')\n            .attr('transform', d => `translate(${d.x},${d.y})`);\n\n        g.append('circle')\n            .attr('r', d => scale(d.value))\n            .attr('fill', '#00704A')\n            .attr('stroke', '#e76f51')\n            .attr('stroke-width', 1)\n            .attr('opacity', 0.85);\n\n        g.append('text')\n            .style('text-anchor', 'middle')\n            .style('font-size', d => `${Math.min(scale(d.value) / 3, 12)}px`)\n            .style('fill', 'white')\n            .style('pointer-events', 'none')\n            .selectAll('tspan')\n            .data(d => {\n                const words = d.label.split(' ');\n                const lines = [];\n                for (let i = 0; i < words.length; i += 2) {\n                    lines.push(words.slice(i, i + 2).join(' '));\n                }\n                return lines;\n            })\n            .enter()\n            .append('tspan')\n            .attr('x', 0)\n            .attr('dy', function(_, i, nodes) {\n                const totalLines = nodes.length;\n                const lineHeight = 1.2;\n                const firstDy = -((totalLines - 1) / 2) * lineHeight;\n                return i === 0 ? `${firstDy}em` : `${lineHeight}em`;\n            })\n            .text(d => d);\n    }, [data, nutrient, category]);\n\n    const headerText = category === 'drinks'\n        ? `Average ${formatLabel(nutrient)} by Type of Drinks`\n        : `Top 10 Food Items by ${formatLabel(nutrient)}`;\n\n    return (\n        <div className=\"bubble-chart-container\">\n            <h3>{headerText}</h3>\n            <svg ref={ref}></svg>\n        </div>\n    );\n}\n\nexport default BubbleChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}