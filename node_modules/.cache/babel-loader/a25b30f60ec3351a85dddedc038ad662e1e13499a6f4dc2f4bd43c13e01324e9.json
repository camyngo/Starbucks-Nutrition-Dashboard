{"ast":null,"code":"var _jsxFileName = \"/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BubbleChart({\n  data,\n  nutrient\n}) {\n  _s();\n  const ref = useRef();\n  useEffect(() => {\n    const svg = d3.select(ref.current);\n    svg.selectAll('*').remove();\n    if (!data || data.length === 0) return;\n\n    // Group drinks by type and average the selected nutrient\n    const grouped = d3.group(data.filter(d => d.type && typeof d[nutrient] === 'number'), d => d.type);\n    const summary = Array.from(grouped, ([type, values]) => ({\n      type,\n      avg: d3.mean(values, d => d[nutrient])\n    }));\n    const container = ref.current.closest('.window');\n    const width = container ? container.offsetWidth : 400;\n    const height = 250;\n    const scale = d3.scaleSqrt().domain([0, d3.max(summary, d => d.avg)]).range([20, 50]);\n    const simulation = d3.forceSimulation(summary).force('x', d3.forceX(width / 2).strength(0.05)).force('y', d3.forceY(height / 2).strength(0.05)).force('collide', d3.forceCollide(d => scale(d.avg) + 4)).stop();\n    for (let i = 0; i < 120; ++i) simulation.tick();\n    const g = svg.selectAll('g').data(summary).enter().append('g').attr('transform', d => `translate(${d.x},${d.y})`);\n    g.append('circle').attr('r', d => scale(d.avg)).attr('fill', 'orange').attr('opacity', 0.8);\n    g.append('text').attr('text-anchor', 'middle').attr('dy', '.35em').style('font-size', '12px').style('fill', '#333').text(d => d.type.length > 12 ? d.type.slice(0, 10) + '…' : d.type);\n  }, [data, nutrient]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '12px'\n      },\n      children: [\"Average \", formatLabel(nutrient), \" by Type of Drinks\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref,\n      style: {\n        width: '100%',\n        height: '250px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(BubbleChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = BubbleChart;\nexport default BubbleChart;\nvar _c;\n$RefreshReg$(_c, \"BubbleChart\");","map":{"version":3,"names":["useEffect","useRef","d3","formatLabel","jsxDEV","_jsxDEV","BubbleChart","data","nutrient","_s","ref","svg","select","current","selectAll","remove","length","grouped","group","filter","d","type","summary","Array","from","values","avg","mean","container","closest","width","offsetWidth","height","scale","scaleSqrt","domain","max","range","simulation","forceSimulation","force","forceX","strength","forceY","forceCollide","stop","i","tick","g","enter","append","attr","x","y","style","text","slice","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/marlin/Desktop/Demeter/finalproject/starbucksnutritiondashboard/src/components/bubblechart/BubbleChart.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { formatLabel } from '../../data/DrinkNutritionModel';\n\nfunction BubbleChart({ data, nutrient }) {\n    const ref = useRef();\n\n    useEffect(() => {\n        const svg = d3.select(ref.current);\n        svg.selectAll('*').remove();\n\n        if (!data || data.length === 0) return;\n\n        // Group drinks by type and average the selected nutrient\n        const grouped = d3.group(\n            data.filter(d => d.type && typeof d[nutrient] === 'number'),\n            d => d.type\n        );\n\n        const summary = Array.from(grouped, ([type, values]) => ({\n            type,\n            avg: d3.mean(values, d => d[nutrient])\n        }));\n\n        const container = ref.current.closest('.window');\n        const width = container ? container.offsetWidth : 400;\n        const height = 250;\n\n        const scale = d3.scaleSqrt()\n            .domain([0, d3.max(summary, d => d.avg)])\n            .range([20, 50]);\n\n        const simulation = d3.forceSimulation(summary)\n            .force('x', d3.forceX(width / 2).strength(0.05))\n            .force('y', d3.forceY(height / 2).strength(0.05))\n            .force('collide', d3.forceCollide(d => scale(d.avg) + 4))\n            .stop();\n\n        for (let i = 0; i < 120; ++i) simulation.tick();\n\n        const g = svg.selectAll('g')\n            .data(summary)\n            .enter()\n            .append('g')\n            .attr('transform', d => `translate(${d.x},${d.y})`);\n\n        g.append('circle')\n            .attr('r', d => scale(d.avg))\n            .attr('fill', 'orange')\n            .attr('opacity', 0.8);\n\n        g.append('text')\n            .attr('text-anchor', 'middle')\n            .attr('dy', '.35em')\n            .style('font-size', '12px')\n            .style('fill', '#333')\n            .text(d => d.type.length > 12 ? d.type.slice(0, 10) + '…' : d.type);\n\n    }, [data, nutrient]);\n\n    return (\n        <div>\n            <h3 style={{ textAlign: 'center', marginBottom: '12px' }}>\n                Average {formatLabel(nutrient)} by Type of Drinks\n            </h3>\n            <svg ref={ref} style={{ width: '100%', height: '250px' }} />\n        </div>\n    );\n}\n\nexport default BubbleChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}